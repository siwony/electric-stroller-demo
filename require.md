
---

# 📗 require.md

```markdown
# Stroller Demo App — Requirements (v1.1)

---

## 0. 용어
- 대여 진행: Mock 기반 연결/인증/잠금해제 절차
- 반납 진행: Mock 기반 연결/인식/잠금 절차
- 모의(Mock): 실제 통신 없이 10초 지연으로 단계 표시

---

## 1. 기능 요구사항 (FR)

### FR-1 홈 화면
- FR-1.1: “대여하기” 버튼을 제공해야 한다.
- FR-1.2: “반납하기” 버튼은 대여중 상태에서만 활성화되어야 한다.
- FR-1.3: 상단에 “데모 모드 / 네트워크 모의” 라벨을 표시해야 한다.
- FR-1.4: **디버그 패널을 반드시 제공해야 한다.**
  - 지연시간(ms) 입력 (기본값 10000)
  - `forceFail` 강제 실패 옵션 토글
  - 시연 중 실패 시나리오(TC-6)를 재현하기 위한 필수 항목이다.

---

### FR-2 대여 진행
- FR-2.1: 단계 표시를 다음 텍스트로 제공해야 한다.  
  1️⃣ “유모차와 연결 중...”  
  2️⃣ “사용자 인증 중...”  
  3️⃣ “잠금 장치 해제 중...”  
  4️⃣ “대여 완료!”
- FR-2.2: 각 단계는 **10초(mockDelayMs=10000)** 후 다음 단계로 자동 전환된다.
- FR-2.3: `forceFail=true`이거나 타임아웃 발생 시 실패 다이얼로그를 표시해야 한다.
- FR-2.4: 성공 시 `RENTED` 상태로 전이하고 유모차 ID를 Mock으로 생성해야 한다.

---

### FR-3 대여중 화면
- FR-3.1: 유모차 ID, 시작 시각, 경과 시간을 표시해야 한다.
- FR-3.2: “반납하기” 버튼을 제공해야 한다.

---

### FR-4 반납 진행
- FR-4.1: 단계 표시를 다음 텍스트로 제공해야 한다.  
  1️⃣ “유모차와 연결 중...”  
  2️⃣ “유모차 상태 확인 중...”  
  3️⃣ “잠금 장치 잠그는 중...”  
  4️⃣ “반납 완료!”
- FR-4.2: 각 단계는 **10초(mockDelayMs=10000)** 후 자동 전환된다.
- FR-4.3: 실패 시 재시도/도움말 버튼을 제공해야 한다.
- FR-4.4: 성공 시 `RETURNED` 상태로 전이하고 반납 완료 화면으로 이동해야 한다.

---

### FR-5 반납 완료
- FR-5.1: 체크 아이콘, 유모차 ID, 이용 시간 요약을 표시해야 한다.
- FR-5.2: “홈으로” 버튼 또는 2초 후 자동 홈 이동을 제공해야 한다.

---

### FR-6 설정/오류
- FR-6.1: 설정 화면에서 데모 모드 안내 및 로그 내보내기(토스트)를 제공해야 한다.
- FR-6.2: 오류 다이얼로그는 제목/본문/CTA(다시시도/취소)를 포함해야 한다.

---

## 2. 비기능 요구사항 (NFR)

### NFR-1 성능
- NFR-1.1: 화면 전환은 300ms 내 렌더(에뮬레이터 기준).
- NFR-1.2: 각 단계 진행 시간은 **10초(10,000ms)**이며, UI 프리즈 없이 정상 갱신되어야 한다.

### NFR-2 안정성
- NFR-2.1: 진행 중 프로세스 종료 후 재개 시 마지막 상태를 복원해야 한다.

### NFR-3 사용성
- NFR-3.1: 버튼 터치 영역은 최소 48dp 이상.
- NFR-3.2: 단계별 진행 상황이 명확히 인지되어야 한다.

### NFR-4 접근성
- NFR-4.1: 주요 컨트롤에 contentDescription 제공.
- NFR-4.2: 진행률 텍스트를 시각·음성 모두로 제공.

### NFR-5 보안
- NFR-5.1: 외부 네트워크 통신 없음.
- NFR-5.2: 개인정보 수집 없음.

---

## 3. 제약 및 가정
- Android 전용 (`minSdk=24`, `targetSdk=latest`)
- Jetpack Compose + Navigation 구조
- 단일 Activity
- 외부 라이브러리 최소 사용

---

## 4. 데이터 모델
```kotlin
data class RentalRecord(
    val strollerId: String,
    val startAt: Long,
    val endAt: Long?
)
```
- strollerId는 “ST” + 타임스탬프 또는 난수 4자리
- 이용 시간 = endAt - startAt

## 5. 상태 전이
```
IDLE --(대여하기)--> RENTING --(성공)--> RENTED
RENTED --(반납하기)--> RETURNING --(성공)--> RETURNED --(홈)--> IDLE
ANY --(실패)--> ERROR --(다시시도)--> 이전 단계
```

## 6. 수용 기준 (AC)

AC-1: 초기엔 대여만 활성, 대여중 상태에서 반납 활성.

AC-2: 대여/반납 단계는 약 10초 간격으로 순차 표시.

AC-3: 경과 타이머는 1초 단위로 갱신.

AC-4: 실패 다이얼로그 후 “다시시도”로 복구 가능.

AC-5: 반납 완료 후 2초 내 자동 홈 이동.

AC-6: 뒤로가기 시 “진행을 취소할까요?” 다이얼로그 표시.

AC-7: 디버그 패널에서 forceFail과 mockDelayMs를 실시간 변경 가능.

## 7. 테스트 시나리오
| ID   | 시나리오           | 기대 결과               |
| ---- | -------------- | ------------------- |
| TC-1 | 앱 실행 → 홈 진입    | 대여 버튼 활성, 반납 버튼 비활성 |
| TC-2 | 대여하기           | 10초 간격으로 단계별 텍스트 표시 |
| TC-3 | 대여 완료 후        | 대여중 화면 전환 및 타이머 표시  |
| TC-4 | 반납하기           | 10초 간격으로 단계별 텍스트 표시 |
| TC-5 | 반납 완료 후        | 요약 표시 + 2초 후 홈 복귀   |
| TC-6 | forceFail=true | 실패 다이얼로그 표시         |
| TC-7 | 뒤로가기           | 확인 다이얼로그 표시         |
| TC-8 | 중단 후 재시작       | 이전 상태 복원            |
| TC-9 | 실제 시연(수동 조작)   | 단계 진행 중 수동 잠금/해제 가능 |


## 8. 오픈 이슈
- [ ] 반납 완료 후 자동 홈 복귀 시간(2초) 시연 후 조정 가능성
- [ ] 진행 단계 문구(“잠금 중” vs “확인 중”) 실제 피드백 후 확정
